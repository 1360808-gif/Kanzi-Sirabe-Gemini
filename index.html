<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¼¢å­— ä¾‹æ–‡æ¤œç´¢ã‚¢ãƒ—ãƒª</title>
    <style>
        /* å…¨ä½“ã®è¨­å®š */
        body {
            font-family: "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
            background-color: #fff9c4; /* ã‚„ã•ã—ã„é»„è‰² */
            margin: 0;
            padding: 0;
            color: #333;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-container {
            display: flex;
            flex: 1;
            height: 100%;
            overflow: hidden;
        }

        /* å·¦ãƒ‘ãƒãƒ«ï¼ˆæ¤œç´¢ï¼‰ */
        .search-panel {
            width: 320px;
            background-color: #ffffff;
            padding: 30px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            z-index: 10;
        }

        /* å³ãƒ‘ãƒãƒ«ï¼ˆçµæœï¼‰ */
        .result-panel {
            flex: 1;
            padding: 30px;
            background-color: #fffde7;
            overflow-y: auto;
        }

        h1 { color: #fbc02d; font-size: 22px; text-align: center; margin-top: 0; text-shadow: 1px 1px 0 #fff; }
        .instruction { font-size: 14px; color: #666; margin-bottom: 20px; text-align: center; }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            border: 3px solid #ffe082;
            border-radius: 12px;
            outline: none;
            box-sizing: border-box;
            margin-bottom: 15px;
        }
        input[type="text"]:focus { border-color: #fbc02d; }

        button {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background-color: #fbc02d;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 0 #f57f17;
            margin-bottom: 10px;
        }
        button:active { transform: translateY(4px); box-shadow: none; }

        /* çµæœã‚°ãƒªãƒƒãƒ‰ */
        #result-area {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .card {
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            border-left: 10px solid #ddd;
            position: relative;
        }

        .card.source-manual { border-left-color: #fbc02d; } /* é»„è‰²ï¼šæ‰‹å‹• */
        .card.source-auto { border-left-color: #bdbdbd; }   /* ã‚°ãƒ¬ãƒ¼ï¼šè‡ªå‹• */

        .card-header {
            display: flex;
            align-items: center;
            width: 100%;
            margin-bottom: 15px;
            border-bottom: 1px dashed #eee;
            padding-bottom: 10px;
        }

        .kanji-large {
            font-size: 50px;
            font-weight: bold;
            color: #333;
            margin-right: 15px;
        }

        .badge {
            font-size: 12px;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            margin-left: auto;
            font-weight: bold;
        }
        .badge-manual { background: #fbc02d; }
        .badge-auto { background: #9e9e9e; }

        /* ä¾‹æ–‡ã‚¨ãƒªã‚¢ */
        .example-box {
            font-size: 18px;
            color: #333;
            background-color: #fff9c4; /* è–„ã„é»„è‰² */
            padding: 15px;
            border-radius: 10px;
            line-height: 1.5;
            flex: 1;
            font-weight: bold;
        }

        /* å¤–éƒ¨ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ */
        .search-btn {
            display: block;
            margin-top: 10px;
            text-align: center;
            background: #f5f5f5;
            color: #555;
            text-decoration: none;
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
            transition: 0.3s;
        }
        .search-btn:hover {
            background: #e0e0e0;
        }

        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 768px) {
            .app-container { flex-direction: column; height: auto; overflow: visible; }
            .search-panel { width: 100%; box-sizing: border-box; padding: 20px; }
            #result-area { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="search-panel">
            <h1>âœï¸ æ¼¢å­—ã¨ä¾‹æ–‡</h1>
            <p class="instruction">ã²ã‚‰ãŒãªã§å…¥åŠ›ã—ã¦ã­</p>
            
            <input type="text" id="input-text" placeholder="ä¾‹ï¼šã‚ã†ã€ãã‹ã„">
            <button onclick="searchKanji()">ã•ãŒã™</button>
            
            <div style="font-size: 12px; color: #666; margin-top: 20px;">
                <p>ğŸ’¡ è‰²ã®ã¡ãŒã„</p>
                <div style="display:flex; align-items:center; gap:5px; margin-bottom:5px;">
                    <span style="width:15px; height:15px; background:#fbc02d; display:inline-block;"></span>
                    <span>å…ˆç”Ÿã®ä¾‹æ–‡ï¼ˆã™ãè¦‹ã‚Œã‚‹ï¼‰</span>
                </div>
                <div style="display:flex; align-items:center; gap:5px;">
                    <span style="width:15px; height:15px; background:#bdbdbd; display:inline-block;"></span>
                    <span>ãƒãƒƒãƒˆæ¤œç´¢ï¼ˆãƒœã‚¿ãƒ³ã‚’ãŠã™ï¼‰</span>
                </div>
            </div>
        </div>

        <div class="result-panel">
            <div id="result-area">
                <div style="text-align: center; color: #aaa; margin-top: 50px;">
                    ã“ã“ã« æ¼¢å­—ã¨ ä¾‹æ–‡ãŒ å‡ºã‚‹ã‚ˆ
                </div>
            </div>
        </div>
    </div>

    <script>
        // â˜…ã“ã“ã«ã€Œã‚ˆãä½¿ã†è¨€è‘‰ã€ã®ä¾‹æ–‡ã‚’ç™»éŒ²ã—ã¦ã­
        const dictionary = {
            "ã‚ã†": [
                { kanji: "ä¼šã†", ex: "å‹ã ã¡ã« ä¼šã†" },
                { kanji: "åˆã†", ex: "ã‚µã‚¤ã‚ºãŒ åˆã†" },
                { kanji: "é­ã†", ex: "å¤•ç«‹ï¼ˆã‚†ã†ã ã¡ï¼‰ã« é­ã†" }
            ],
            "ã‚ã‘ã‚‹": [
                { kanji: "é–‹ã‘ã‚‹", ex: "ãƒ‰ã‚¢ã‚’ é–‹ã‘ã‚‹" },
                { kanji: "ç©ºã‘ã‚‹", ex: "å¸­ï¼ˆã›ãï¼‰ã‚’ ç©ºã‘ã‚‹" },
                { kanji: "æ˜ã‘ã‚‹", ex: "å¤œãŒ æ˜ã‘ã‚‹" }
            ],
            "ã†ã¤ã™": [
                { kanji: "å†™ã™", ex: "ãƒãƒ¼ãƒˆã« å†™ã™" },
                { kanji: "æ˜ ã™", ex: "é¡ï¼ˆã‹ãŒã¿ï¼‰ã« æ˜ ã™" },
                { kanji: "ç§»ã™", ex: "å¸­ã‚’ ç§»ã™" }
            ],
            "ãã‹ã„": [
                { kanji: "æ©Ÿæ¢°", ex: "æ©Ÿæ¢°ã‚’ å‹•ã‹ã™" },
                { kanji: "æ©Ÿä¼š", ex: "ã‚ˆã„ æ©Ÿä¼š" },
                { kanji: "å™¨æ¢°", ex: "å™¨æ¢° ä½“æ“ï¼ˆãŸã„ãã†ï¼‰" }
            ],
            "ã“ã†ãˆã‚“": [
                { kanji: "å…¬åœ’", ex: "å…¬åœ’ã§ ã‚ãã¶" },
                { kanji: "è¬›æ¼”", ex: "å…ˆç”Ÿã® è¬›æ¼”ã‚’ãã" }
            ],
            "ã¯ã‚„ã„": [
                { kanji: "æ—©ã„", ex: "æœï¼ˆã‚ã•ï¼‰ æ—©ã„" },
                { kanji: "é€Ÿã„", ex: "è¶³ãŒ é€Ÿã„" }
            ]
        };

        async function searchKanji() {
            const input = document.getElementById('input-text').value.trim();
            const resultArea = document.getElementById('result-area');
            
            if (input === "") return;

            resultArea.innerHTML = '<p style="text-align:center; color:#666;">ã—ã‚‰ã¹ã¦ã„ã¾ã™...</p>';

            // 1. ç™»éŒ²æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆ
            if (dictionary[input]) {
                resultArea.innerHTML = ""; 
                dictionary[input].forEach(item => {
                    // true = æ‰‹å‹•ç™»éŒ²
                    createCard(item.kanji, item.ex, true);
                });
            } 
            // 2. ãªã„å ´åˆï¼ˆè‡ªå‹•å¤‰æ›ã®ã¿ï¼‰
            else {
                try {
                    const response = await fetch(`https://www.google.com/transliterate?langpair=ja-Hira|ja&text=${input}`);
                    const data = await response.json();
                    
                    resultArea.innerHTML = ""; 

                    if (data && data[0] && data[0][1] && data[0][1].length > 0) {
                        const candidates = data[0][1].slice(0, 3);
                        
                        candidates.forEach(kanji => {
                            if (kanji === input) return;
                            // false = è‡ªå‹•ï¼ˆä¾‹æ–‡ãªã—ï¼‰
                            createCard(kanji, null, false);
                        });

                        if(resultArea.innerHTML === "") {
                             resultArea.innerHTML = `<div style="text-align:center; color:#777;">æ¼¢å­—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>`;
                        }
                    } else {
                        resultArea.innerHTML = `<div style="text-align:center; color:#777;">è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>`;
                    }
                } catch (error) {
                    resultArea.innerHTML = `<p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</p>`;
                }
            }
        }

        // ã‚«ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆä¾‹æ–‡ãƒ¢ãƒ¼ãƒ‰ï¼‰
        function createCard(kanji, example, isManual) {
            const resultArea = document.getElementById('result-area');
            
            let cardClass = isManual ? "card source-manual" : "card source-auto";
            let badgeText = isManual ? "å…ˆç”Ÿã®ä¾‹æ–‡" : "ãƒãƒƒãƒˆæ¤œç´¢";
            let badgeClass = isManual ? "badge-manual" : "badge-auto";

            // ä¾‹æ–‡ã‚¨ãƒªã‚¢ã®ä¸­èº«
            let contentHtml = "";

            if (isManual) {
                // æ‰‹å‹•ç™»éŒ²ã®å ´åˆï¼šä¾‹æ–‡ã‚’ãã®ã¾ã¾è¡¨ç¤º
                contentHtml = `<div class="example-box">ä¾‹æ–‡ï¼š<br>${example}</div>`;
            } else {
                // è‡ªå‹•ã®å ´åˆï¼šæ¤œç´¢ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                // Yahoo!ãã£ãšã®è¾æ›¸æ¤œç´¢URL
                const searchUrl = `https://kids.yahoo.co.jp/search/dictionary?q=${kanji} ä¾‹æ–‡`;
                // ã‚‚ã—ãã¯Googleãªã‚‰: `https://www.google.com/search?q=${kanji}+ä¾‹æ–‡`
                
                contentHtml = `
                    <div class="example-box" style="background:#f5f5f5; color:#777; font-size:14px;">
                        ã¾ã ä¾‹æ–‡ãŒã‚ã‚Šã¾ã›ã‚“
                    </div>
                    <a href="${searchUrl}" target="_blank" class="search-btn">
                        ğŸ” ã€Œ${kanji}ã€ã®ä¾‹æ–‡ã‚’è¦‹ã‚‹
                    </a>
                `;
            }

            const html = `
                <div class="${cardClass}">
                    <div class="card-header">
                        <div class="kanji-large">${kanji}</div>
                        <span class="badge ${badgeClass}">${badgeText}</span>
                    </div>
                    ${contentHtml}
                </div>
            `;
            resultArea.innerHTML += html;
        }

        document.getElementById("input-text").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                searchKanji();
            }
        });
    </script>
</body>
</html>
