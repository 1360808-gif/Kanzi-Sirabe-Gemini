<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‹ã‚“ã˜ãƒ»ã§ã‹è¾æ›¸ï¼ˆ2ã‚«ãƒ©ãƒ ç‰ˆï¼‰</title>
    <style>
        :root {
            --primary-font: "UD Digi Kyokasho N-R", "UD Digi Kyokasho NK-R", "UDãƒ‡ã‚¸ã‚¿ãƒ«æ•™ç§‘æ›¸ä½“ N-R", "Klee One", "Zen Maru Gothic", sans-serif;
            --main-bg: #f5f7f9;
            --accent-orange: #e67e22;
            --sub-blue: #3498db;
            --sidebar-bg: #ffffff;
        }

        body {
            font-family: var(--primary-font);
            background-color: var(--main-bg);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh; /* ç”»é¢å…¨ä½“ã‚’ä½¿ç”¨ */
            overflow: hidden;
        }

        /* ä¸Šéƒ¨æ¤œç´¢ãƒãƒ¼ */
        header {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        .search-box {
            max-width: 800px;
            margin: 0;
        }
        input[type="text"] {
            width: 100%; padding: 12px 25px; font-size: 22px; 
            border: 3px solid #e1e8ed; border-radius: 50px; 
            outline: none; font-family: var(--primary-font);
            transition: border-color 0.2s;
        }
        input[type="text"]:focus { border-color: var(--accent-orange); }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆå·¦å³åˆ†å‰²ï¼‰ */
        .app-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* å·¦ã‚«ãƒ©ãƒ ï¼ˆ3/4ï¼‰ï¼šãƒ¡ã‚¤ãƒ³ãŠæ‰‹æœ¬ */
        .main-column {
            flex: 3; /* å…¨ä½“ã®3/4 */
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            overflow-y: auto;
        }

        .focus-card {
            background: white;
            width: 100%;
            max-width: 700px;
            padding: 50px;
            border-radius: 30px;
            border: 6px solid var(--accent-orange);
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
        }

        .huge-text {
            font-size: 180px; /* ã•ã‚‰ã«å¤§ããè¡¨ç¤º */
            color: #1a202c;
            line-height: 1.1;
            margin-bottom: 20px;
        }

        /* å³ã‚«ãƒ©ãƒ ï¼ˆ1/4ï¼‰ï¼šä»–ã®å€™è£œã‚¿ã‚¤ãƒ« */
        .side-column {
            flex: 1; /* å…¨ä½“ã®1/4 */
            background-color: var(--sidebar-bg);
            border-left: 2px solid #e2e8f0;
            padding: 20px;
            overflow-y: auto;
        }

        .side-header {
            font-size: 16px;
            font-weight: bold;
            color: #718096;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sub-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .sub-card:hover {
            border-color: var(--sub-blue);
            background: #f0f7ff;
            transform: translateX(-5px);
        }

        .sub-kanji {
            font-size: 40px;
            display: block;
            margin-bottom: 5px;
            color: #2d3748;
        }

        .sub-info {
            font-size: 13px;
            color: #4a5568;
            line-height: 1.4;
        }

        ruby { ruby-align: center; }
        rt { font-size: 0.35em; color: var(--accent-orange); font-weight: bold; }

        @media (max-width: 850px) {
            .app-layout { flex-direction: column; }
            .side-column { flex: none; height: 300px; border-left: none; border-top: 2px solid #e2e8f0; }
        }
    </style>
</head>
<body>

<header>
    <div class="search-box">
        <input type="text" id="input-text" placeholder="æ–‡å­—ã‚’ã„ã‚Œã‚‹ã¨ ã™ãã« ãŠæ‰‹æœ¬ãŒ å‡ºã‚‹ã‚ˆï¼" autocomplete="off">
    </div>
</header>

<div class="app-layout">
    <main class="main-column" id="main-column">
        <div id="hint-msg" style="color:#a0aec0; font-size:24px; margin-top:100px;">
            ğŸ‘ˆ å·¦ä¸Šã®ã¾ã©ã«ã€æ–‡å­—ã‚’å…¥åŠ›ã—ã¦ã­ï¼
        </div>
        <div id="main-target" style="width:100%; display:none;">
            </div>
    </main>

    <aside class="side-column">
        <div class="side-header">ğŸ’¡ ã»ã‹ã«ã‚‚ã‚ã‚‹ã‚ˆ</div>
        <div id="suggestion-list">
            </div>
    </aside>
</div>

<script>
    const dictionary = {
        "ã‹ã‚“ã˜": [
            {kanji:"æ¼¢å­—", r:"ã‹ã‚“ã˜", m:"æ—¥æœ¬ã® ä½¿ã† æ–‡å­—"},
            {kanji:"æ„Ÿã˜", r:"ã‹ã‚“ã˜", m:"å¿ƒã« ã†ã‹ã¶ æ°—æŒã¡"},
            {kanji:"å¹¹äº‹", r:"ã‹ã‚“ã˜", m:"ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ãªã©ã® ã¾ã¨ã‚å½¹"}
        ],
        "ã‚ã†": [
            {kanji:"ä¼šã†", r:"ã‚ã†", m:"äººã« ä¼šã†"},
            {kanji:"åˆã†", r:"ã‚ã†", m:"å½¢ã‚„ æ•°ãŒ åŒã˜ã«ãªã‚‹"},
            {kanji:"é­ã†", r:"ã‚ã†", m:"ã²ã©ã„ ç›®ã« é­ã†"}
        ],
        "ãã‹ã„": [
            {kanji:"æ©Ÿæ¢°", r:"ãã‹ã„", m:"ãƒã‚·ãƒ³ãƒ»ãƒ­ãƒœãƒƒãƒˆ"},
            {kanji:"æ©Ÿä¼š", r:"ãã‹ã„", m:"ãƒãƒ£ãƒ³ã‚¹ãƒ»ã¡ã‚‡ã†ã©ã‚ˆã„æ™‚"},
            {kanji:"å™¨æ¢°", r:"ãã‹ã„", m:"é“å…·ï¼ˆã¨ã³ç®±ãªã©ï¼‰"}
        ]
    };

    const input = document.getElementById('input-text');

    input.addEventListener('input', async () => {
        const val = input.value.trim();
        if(!val) {
            document.getElementById('hint-msg').style.display = 'block';
            document.getElementById('main-target').style.display = 'none';
            document.getElementById('suggestion-list').innerHTML = '';
            return;
        }

        const hasKanji = /[ä¸€-é¾ ]/.test(val);
        let reading = hasKanji ? await fetchReading(val) : val;
        
        let mainObj = { kanji: val, r: reading, m: "" };
        let allOptions = dictionary[reading] || [];

        const dictMatch = allOptions.find(s => s.kanji === val);
        if(dictMatch) mainObj.m = dictMatch.m;

        const subList = allOptions.filter(s => s.kanji !== val);

        renderUI(mainObj, subList);
    });

    function renderUI(main, subs) {
        document.getElementById('hint-msg').style.display = 'none';
        const target = document.getElementById('main-target');
        target.style.display = 'block';

        // ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ã®æ›´æ–°
        target.innerHTML = `
            <div class="focus-card">
                <div class="huge-text">
                    <ruby>${main.kanji}<rt>${main.r}</rt></ruby>
                </div>
                <div style="font-size:24px; color:#4a5568; background:#fffaf0; padding:20px; border-radius:15px; border:1px dashed #feebc8;">
                    ${main.m || 'ï¼ˆã˜ã—ã‚‡ã« ãªã„è¨€è‘‰ã§ã™ã€‚å½¢ã‚’ ã‚ˆãè¦‹ã¦ã­ï¼ï¼‰'}
                </div>
            </div>
        `;

        // ã‚µã‚¤ãƒ‰ã‚¨ãƒªã‚¢ã®æ›´æ–°
        const side = document.getElementById('suggestion-list');
        side.innerHTML = '';
        if(subs.length === 0) {
            side.innerHTML = '<div style="color:#cbd5e0; font-size:14px;">ã»ã‹ã® ã“ã†ã»ã¯ ã‚ã‚Šã¾ã›ã‚“</div>';
        } else {
            subs.forEach(item => {
                const card = document.createElement('div');
                card.className = 'sub-card';
                card.onclick = () => {
                    input.value = item.kanji;
                    input.dispatchEvent(new Event('input'));
                };
                card.innerHTML = `
                    <span class="sub-kanji"><ruby>${item.kanji}<rt>${item.r}</rt></ruby></span>
                    <div class="sub-info">${item.m}</div>
                `;
                side.appendChild(card);
            });
        }
    }

    async function fetchReading(kanji) {
        try {
            const res = await fetch(`https://www.google.com/transliterate?langpair=ja|ja-Hira&text=${kanji}`);
            const data = await res.json();
            return data[0][1][0];
        } catch (e) { return ""; }
    }
</script>
</body>
</html>
