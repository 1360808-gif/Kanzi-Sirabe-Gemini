<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¼¢å­—ã‚µã‚¯ã‚µã‚¯æ¤œç´¢ï¼ˆé€ã‚Šä»®åå¯¾å¿œç‰ˆï¼‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Klee+One:wght@400;600&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Zen Maru Gothic', sans-serif; background-color: #fdfaf5; margin: 0; padding: 0; color: #333; height: 100vh; display: flex; flex-direction: column; }
        .app-container { display: flex; flex: 1; height: 100%; overflow: hidden; }
        .search-panel { width: 300px; background-color: #ffffff; padding: 30px; box-shadow: 2px 0 10px rgba(0,0,0,0.05); display: flex; flex-direction: column; z-index: 10; }
        .result-panel { flex: 1; padding: 30px; background-color: #fff5e6; overflow-y: auto; }
        h1 { color: #d35400; font-size: 20px; text-align: center; margin-top: 0; }
        input[type="text"] { width: 100%; padding: 15px; font-size: 20px; border: 3px solid #ffcc80; border-radius: 12px; outline: none; box-sizing: border-box; margin-bottom: 15px; font-family: inherit; }
        button { width: 100%; padding: 15px; font-size: 18px; background-color: #e67e22; color: white; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 0 #d35400; }
        #result-area { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .card { background: #fff; border-radius: 15px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.05); display: flex; flex-direction: column; border-left: 10px solid #ccc; }
        .card.has-meaning { border-left-color: #e67e22; }
        .card.no-meaning { border-left-color: #bdc3c7; }
        .kanji-large { font-family: 'Klee One', cursive; font-size: 56px; font-weight: 600; color: #2c3e50; margin-bottom: 10px; text-align: center; word-break: break-all; }
        .meaning { font-size: 16px; color: #444; background-color: #fff9f0; padding: 12px; border-radius: 8px; line-height: 1.4; font-weight: bold; }
        @media (max-width: 768px) { .app-container { flex-direction: column; height: auto; } .search-panel { width: 100%; } }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="search-panel">
            <h1>ğŸ–‹ï¸ ã‹ã‚“ã˜ç·´ç¿’ã˜ã—ã‚‡</h1>
            <input type="text" id="input-text" placeholder="ä¾‹ï¼šã‚ã†ã€ä¼šã†ã€èµ°ã‚‹">
            <button onclick="searchKanji()">ã•ãŒã™</button>
            <div style="font-size: 11px; color: #666; margin-top: 20px; line-height: 1.6;">
                <p>ğŸ’¡ ä½¿ã„æ–¹</p>
                <p>ãƒ»ã€Œé€ã‚Šä»®åã€ã‚’å…¥ã‚Œã¦ã‚‚OKï¼<br>ãƒ»æ¼¢å­—ã‚’å…¥ã‚Œã‚‹ã¨ã€åŒã˜èª­ã¿ã®æ¼¢å­—ã‚‚ä¸€ç·’ã«æ¢ã—ã¾ã™ã€‚</p>
            </div>
        </div>
        <div class="result-panel">
            <div id="result-area"></div>
        </div>
    </div>

    <script>
        const dictionary = {
            "ã‚ã†": [{kanji:"ä¼šã†", mean:"äººã¨ä¼šã†"}, {kanji:"åˆã†", mean:"åŒã˜ã«ãªã‚‹"}, {kanji:"é­ã†", mean:"æ‚ªã„ã“ã¨ã«ã‚ã†"}],
            "ã‚ã‘ã‚‹": [{kanji:"é–‹ã‘ã‚‹", mean:"ãƒ‰ã‚¢ã‚’ã²ã‚‰ã"}, {kanji:"ç©ºã‘ã‚‹", mean:"ã‹ã‚‰ã«ã™ã‚‹"}, {kanji:"æ˜ã‘ã‚‹", mean:"æ˜ã‚‹ããªã‚‹"}],
            "ã‚ãŒã‚‹": [{kanji:"ä¸ŠãŒã‚‹", mean:"ä¸Šã¸ã„ã"}, {kanji:"æŒ™ãŒã‚‹", mean:"æ‰‹ãŒã‚ãŒã‚‹"}],
            "ã‚ã¤ã„": [{kanji:"æš‘ã„", mean:"æ°—æ¸©ãŒé«˜ã„"}, {kanji:"ç†±ã„", mean:"æ¸©åº¦ãŒé«˜ã„"}, {kanji:"åšã„", mean:"åšã¿ãŒã‚ã‚‹"}],
            "ã‚ã‚‰ã‚ã™": [{kanji:"è¡¨ã™", mean:"è¨€è‘‰ã«ã™ã‚‹"}, {kanji:"ç¾ã™", mean:"å§¿ã‚’è¦‹ã›ã‚‹"}, {kanji:"è‘—ã™", mean:"æœ¬ã‚’æ›¸ã"}],
            "ãŠãã‚‹": [{kanji:"é€ã‚‹", mean:"å±Šã‘ã‚‹"}, {kanji:"è´ˆã‚‹", mean:"ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ"}],
            "ãŠã•ã‚ã‚‹": [{kanji:"åã‚ã‚‹", mean:"ä¸­ã«å…¥ã‚Œã‚‹"}, {kanji:"ç´ã‚ã‚‹", mean:"ãŠé‡‘ã‚’æ‰•ã†"}, {kanji:"æ²»ã‚ã‚‹", mean:"å¹³å’Œã«ã™ã‚‹"}, {kanji:"ä¿®ã‚ã‚‹", mean:"å­¦å•ã‚’èº«ã«ã¤ã‘ã‚‹"}],
            "ã‹ãˆã‚‹": [{kanji:"å¤‰ãˆã‚‹", mean:"åˆ¥ã®ã‚‚ã®ã«"}, {kanji:"ä»£ãˆã‚‹", mean:"äº¤ä»£ã™ã‚‹"}, {kanji:"æ›¿ãˆã‚‹", mean:"æ–°ã—ãã™ã‚‹"}, {kanji:"æ›ãˆã‚‹", mean:"äº¤æ›ã™ã‚‹"}],
            "ã—ã‚ã‚‹": [{kanji:"é–‰ã‚ã‚‹", mean:"ãƒ‰ã‚¢ã‚’é–‰ã˜ã‚‹"}, {kanji:"ç· ã‚ã‚‹", mean:"ãƒ™ãƒ«ãƒˆã‚’ã‚€ã™ã¶"}, {kanji:"å ã‚ã‚‹", mean:"å ´æ‰€ã‚’ã¨ã‚‹"}, {kanji:"æ¹¿ã‚‹", mean:"ã¬ã‚Œã‚‹"}],
            "ãŸã¤": [{kanji:"ç«‹ã¤", mean:"ç«‹ã¡ã‚ãŒã‚‹"}, {kanji:"å»ºã¤", mean:"å®¶ãŒã§ãã‚‹"}, {kanji:"çµ¶ã¤", mean:"ç¸ã‚’ãã‚‹"}, {kanji:"æ–­ã¤", mean:"ã‚„ã‚ã‚‹"}],
            "ã¯ã‹ã‚‹": [{kanji:"è¨ˆã‚‹", mean:"æ™‚é–“ãƒ»æ•°"}, {kanji:"æ¸¬ã‚‹", mean:"é•·ã•ãƒ»é«˜ã•"}, {kanji:"é‡ã‚‹", mean:"é‡ã•"}, {kanji:"å›³ã‚‹", mean:"è¨ˆç”»ã™ã‚‹"}, {kanji:"è¬€ã‚‹", mean:"ãŸãã‚‰ã‚€"}],
            "ã¯ã‚„ã„": [{kanji:"æ—©ã„", mean:"æ™‚é–“ãŒã¯ã‚„ã„"}, {kanji:"é€Ÿã„", mean:"ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒã¯ã‚„ã„"}],
            "ã‚„ã•ã—ã„": [{kanji:"æ˜“ã—ã„", mean:"ã‹ã‚“ãŸã‚“"}, {kanji:"å„ªã—ã„", mean:"ã—ã‚“ã›ã¤"}]
        };

        async function searchKanji() {
            const input = document.getElementById('input-text').value.trim();
            const resultArea = document.getElementById('result-area');
            if (input === "") return;
            
            resultArea.innerHTML = '';
            
            // 1. èª­ã¿ï¼ˆã²ã‚‰ãŒãªï¼‰ã‚’ç‰¹å®šã™ã‚‹ï¼ˆé€†å¼•ãï¼‰
            let targetReading = null;
            if (dictionary[input]) {
                targetReading = input;
            } else {
                for (let reading in dictionary) {
                    if (dictionary[reading].some(item => item.kanji === input)) {
                        targetReading = reading;
                        break;
                    }
                }
            }

            // 2. è¡¨ç¤ºå‡¦ç†
            if (targetReading) {
                // è¾æ›¸ã«ã‚ã‚‹å ´åˆï¼šã‚»ãƒƒãƒˆã§ã™ã¹ã¦è¡¨ç¤º
                dictionary[targetReading].forEach(item => createCard(item.kanji, item.mean));
            } else {
                // è¾æ›¸ã«ãªã„å ´åˆ
                if (/[ä¸€-é¾ ]/.test(input)) {
                    // æ¼¢å­—ãŒå«ã¾ã‚Œã¦ã„ãŸã‚‰ã€é€ã‚Šä»®åã”ã¨ãã®ã¾ã¾è¡¨ç¤º
                    createCard(input, null);
                } else {
                    // ã²ã‚‰ãŒãªã®ã¿ãªã‚‰APIã§å¤‰æ›
                    await searchFromAPI(input);
                }
            }
        }

        async function searchFromAPI(hira) {
            try {
                const res = await fetch(`https://www.google.com/transliterate?langpair=ja-Hira|ja&text=${hira}`);
                const data = await res.json();
                if (data && data[0] && data[0][1]) {
                    const isHalfKana = (str) => /[\uFF61-\uFF9F]/.test(str);
                    const filtered = data[0][1].filter(kanji => !isHalfKana(kanji));
                    filtered.slice(0, 5).forEach(kanji => {
                        if (kanji !== hira) createCard(kanji, null);
                    });
                }
            } catch (e) { console.error(e); }
        }

        function createCard(kanji, mean) {
            const hasMeaning = (mean != null);
            const cardClass = hasMeaning ? "card has-meaning" : "card no-meaning";
            // æ¼¢å­—ã®æ–‡å­—æ•°ãŒå¤šã„å ´åˆã¯å°‘ã—ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å°ã•ãèª¿æ•´
            const fontSize = kanji.length > 4 ? "40px" : "56px";

            const html = `
                <div class="${cardClass}">
                    <div class="kanji-large" style="font-size: ${fontSize}">${kanji}</div>
                    ${hasMeaning ? `<div class="meaning">${mean}</div>` : ""}
                </div>
            `;
            document.getElementById('result-area').innerHTML += html;
        }

        document.getElementById("input-text").addEventListener("keypress", (e) => { if (e.key === "Enter") searchKanji(); });
    </script>
</body>
</html>
